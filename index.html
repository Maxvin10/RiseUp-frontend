<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RiseUp</title>
  <link rel="shortcut icon" href="rasmlar/dark.png" type="icon">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['system-ui', 'ui-sans-serif', 'Inter', 'sans-serif'],
          },
          backgroundImage: {
            'grid': 'radial-gradient(circle at 1px 1px, rgba(148,163,184,0.18) 1px, transparent 0)',
          }
        },
      },
    }
  </script>
</head>

<body id="body"
      class="bg-slate-950 text-slate-50 min-h-screen antialiased font-sans transition-colors duration-500">

  <!-- BACKGROUND LAYERLAR -->
  <div class="pointer-events-none fixed inset-0 -z-30 bg-slate-950"></div>

  <!-- Gradient dumaloqlar -->
  <div class="pointer-events-none fixed inset-0 -z-20 overflow-hidden">
    <div class="absolute -top-40 -left-10 h-80 w-80 rounded-full bg-indigo-500/25 blur-3xl"></div>
    <div class="absolute -bottom-40 -right-10 h-96 w-96 rounded-full bg-fuchsia-500/25 blur-3xl"></div>
    <div class="absolute inset-0 opacity-[0.07] bg-grid bg-[length:24px_24px]"></div>
  </div>

  <!-- Orbital gradient halo -->
  <div class="pointer-events-none fixed inset-x-0 top-20 -z-10 flex justify-center">
    <div class="h-72 w-[600px] rounded-[999px] bg-gradient-to-r from-indigo-500/40 via-sky-400/40 to-fuchsia-500/40 blur-3xl opacity-70"></div>
  </div>

  <!-- HEADER -->
  <header class="sticky top-0 z-40 border-b border-slate-800/60 bg-slate-950/80 backdrop-blur-2xl">
    <div class="max-w-6xl mx-auto px-4 lg:px-8 py-3 flex items-center justify-between gap-4">

      <!-- Logo + Brand -->
      <div class="flex items-center gap-3">
        <div class="relative">
          <div class="absolute inset-0 rounded-3xl bg-gradient-to-tr from-indigo-500/80 to-fuchsia-500/80 blur-md opacity-70"></div>
          <img id="logo"
               src="rasmlar/dark.png"
               alt="RiseUp Logo"
               class="relative w-11 h-11 rounded-2xl bg-slate-950 border border-slate-700 shadow-[0_0_35px_rgba(79,70,229,0.65)] object-cover" />
          <span class="absolute -bottom-1 -right-1 h-3 w-3 rounded-full bg-emerald-400 shadow shadow-emerald-400/80"></span>
        </div>
        <div class="flex flex-col">
          <span class="font-semibold text-lg tracking-tight text-white">RiseUp</span>
          <span class="text-[13px] text-slate-400 hidden sm:inline">
            Reja ‚Ä¢ O'rganish ‚Ä¢ Nazorat ‚Ä¢ O'sish
          </span>
        </div>
      </div>

      <!-- NAV -->
      <nav class="hidden md:flex items-center gap-6 text-[18px] font-medium">
        <!-- agar kerak bo‚Äòlsa nav linklar -->
        <!-- <a id="adminLink" href="admin.html" class="text-slate-200 hover:text-white">Admin</a> -->
      </nav>

      <!-- Right controls -->
      <div class="flex items-center gap-2 sm:gap-3">
        <select id="language-select"
                class="border border-slate-700/80 rounded-xl px-3 py-1.5 text-xs sm:text-[13px] bg-slate-900/90 text-slate-100 focus:outline-none focus:ring-2 focus:ring-indigo-500/70 cursor-pointer">
          <option value="en">EN</option>
          <option value="uz">UZ</option>
          <option value="ru">RU</option>
        </select>

        <a target="_blank" href="login.html">
          <button
            class="hidden sm:inline-flex items-center gap-2 bg-gradient-to-r from-indigo-500 to-fuchsia-500 text-white px-4 py-1.5 rounded-xl text-xs sm:text-[13px] font-semibold shadow-[0_0_30px_rgba(129,140,248,0.7)] hover:brightness-110 transition">
            <span data-key="signin">Sign in</span>
          </button>
        </a>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="max-w-6xl mx-auto px-4 lg:px-8 pt-10 lg:pt-14 pb-20">

    <!-- HERO -->
    <section class="flex flex-col lg:flex-row items-center gap-10 lg:gap-16">

      <!-- LEFT: TEXT -->
      <div class="w-full space-y-7">

        <!-- Badge -->
        <div
          class="inline-flex items-center gap-2 rounded-full border border-indigo-400/40 bg-slate-900/80 px-3 py-1 text-[11px] uppercase tracking-[0.12em] text-indigo-200 shadow shadow-indigo-500/30">
          <span class="h-1.5 w-1.5 rounded-full bg-emerald-400 animate-pulse"></span>
          <span>Study smarter ¬∑ Not harder</span>
        </div>

        <div class="space-y-4">
          <h1 class="text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-extrabold tracking-tight text-white leading-tight"
              data-key="main_title">
            Plan, Learn, and Track <br> Rise-Up
          </h1>
          <p class="text-slate-300 text-sm sm:text-[15px] lg:text-base leading-relaxed max-w-xl"
             data-key="main_desc">
            Organize your learning journey, set goals, <br> and watch your progress grow day by day.
          </p>
        </div>

        <!-- CTA -->
        <div class="flex flex-wrap items-center gap-4">

          <!-- ‚úÖ MODIFIED: Go to Dashboard endi backend /api/panel/ orqali tekshiradi -->
          <button
            id="goDashboardBtn"
            class="inline-flex items-center gap-2 bg-gradient-to-r from-indigo-500 via-sky-500 to-emerald-400 text-slate-950 px-6 py-2.5 rounded-2xl text-sm sm:text-[15px] font-semibold shadow-lg shadow-indigo-500/50 hover:-translate-y-0.5 hover:shadow-[0_20px_60px_rgba(56,189,248,0.6)] transition-transform duration-150"
            data-key="go_dashboard">
            Go to Dashboard
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </button>

          <button
            class="inline-flex items-center gap-2 border border-slate-700 bg-slate-900/80 text-slate-100 px-5 py-2.5 rounded-2xl text-sm sm:text-[15px] font-medium hover:border-indigo-400 hover:text-indigo-200 transition"
            data-key="view_stats">
            View Statistics
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none"
                 viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M4 19h16M5 11l4 4 5-8 5 7" />
            </svg>
          </button>
        </div>

        <!-- QUICK STATS -->
        <div class="flex flex-wrap gap-6 text-xs text-slate-300 pt-4">
          <div class="space-y-1">
            <p class="text-xl font-semibold text-white">+1.2k</p>
            <p class="text-[11px] text-slate-400">Active learners</p>
          </div>
          <div class="space-y-1">
            <p class="text-xl font-semibold text-white">92%</p>
            <p class="text-[11px] text-slate-400">Consistency rate</p>
          </div>
          <div class="space-y-1">
            <p class="text-xl font-semibold text-white">35 min</p>
            <p class="text-[11px] text-slate-400">Avg. focus / day</p>
          </div>
        </div>

      </div>

      <!-- RIGHT: GLASS PANEL / DASHBOARD PREVIEW -->
      <!-- ... -->
    </section>

    <!-- FEATURES -->
    <!-- ... (qolgan kodlar o‚Äòzgarmadi) ... -->

    <!-- FOOTER -->
    <footer
      class="mt-10 border-t border-slate-800/70 pt-5 text-[16px] text-slate-500 flex flex-col sm:flex-row items-center justify-between gap-3">
      <p>¬© <span id="yearSpan"></span> RiseUp. All rights reserved.</p>
      <p class="text-[16px] text-slate-500/80">
        Built for students who want to grow every single day.
      </p>
    </footer>
  </main>

  <!-- TRANSLATIONS + THEME -->
  <script>
    const translations = {
      en: {
        home: "Home",
        dashboard: "Dashboard",
        tasks: "Tasks",
        statistics: "Statistics",
        admin: "Admin",
        signin: "Sign in",
        main_title: "Plan, Learn, and Track <br> Rise-Up",
        main_desc: "Organize your learning journey, set goals, <br> and watch your progress grow day by day.",
        go_dashboard: "Go to Dashboard",
        view_stats: "View Statistics",
        features_title: "Everything You Need to Succeed",
        features_desc: "Powerful tools to enhance your learning journey",
        plan_title: "Create Learning Plans",
        plan_desc: "Design personalized study schedules and break down complex topics into manageable learning sessions.",
        progress_title: "Track Your Progress",
        progress_desc: "Monitor your achievements with detailed analytics and stay motivated as you hit each milestone.",
        community_title: "Join the Community",
        community_desc: "Connect with learners around the world and exchange tips, resources, and motivation."
      },
      uz: {
        home: "Bosh sahifa",
        dashboard: "Boshqaruv paneli",
        tasks: "Vazifalar",
        statistics: "Statistika",
        admin: "Admin",
        signin: "Kirish",
        main_title: "Reja, O'rgan, Kuzat <br> Rise-Up",
        main_desc: "O'quv sayohatingizni tartibga soling, maqsadlar qo'ying, <br> va har kuni o'sishingizni kuzating.",
        go_dashboard: "Panelga o'tish",
        view_stats: "Statistikani ko'rish",
        features_title: "Muvaffaqiyat uchun kerak bo'lgan hamma narsa",
        features_desc: "O'quv jarayoningizni yaxshilash uchun kuchli vositalar",
        plan_title: "O'quv rejalarini yarating",
        plan_desc: "Shaxsiy o'quv jadvallarini tuzing va murakkab mavzularni boshqariladigan qismlarga bo'ling.",
        progress_title: "Jarayoningizni kuzating",
        progress_desc: "Yutuqlaringizni batafsil tahlillar bilan kuzating va har bir bosqichda motivatsiyada bo'ling.",
        community_title: "Jamiyatga qo'shiling",
        community_desc: "Dunyodagi o'quvchilar bilan bog'laning va maslahatlar, resurslar va motivatsiya almashing."
      },
      ru: {
        home: "–ì–ª–∞–≤–Ω–∞—è",
        dashboard: "–ü–∞–Ω–µ–ª—å",
        tasks: "–ó–∞–¥–∞—á–∏",
        statistics: "–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞",
        admin: "Admin",
        signin: "–í–æ–π—Ç–∏",
        main_title: "–ü–ª–∞–Ω–∏—Ä—É–π, –£—á–∏—Å—å, –û—Ç—Å–ª–µ–∂–∏–≤–∞–π <br>  Rise-Up",
        main_desc: "–û—Ä–≥–∞–Ω–∏–∑—É–π —Å–≤–æ–µ –æ–±—É—á–µ–Ω–∏–µ, —Å—Ç–∞–≤—å —Ü–µ–ª–∏, <br> –∏ —Å–ª–µ–¥–∏ –∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º –¥–µ–Ω—å –∑–∞ –¥–Ω—ë–º.",
        go_dashboard: "–ü–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å",
        view_stats: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É",
        features_title: "–í—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —É—Å–ø–µ—Ö–∞",
        features_desc: "–ú–æ—â–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∞—à–µ–≥–æ –æ–±—É—á–µ–Ω–∏—è",
        plan_title: "–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø–ª–∞–Ω—ã –æ–±—É—á–µ–Ω–∏—è",
        plan_desc: "–°–æ—Å—Ç–∞–≤–ª—è–π—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –∏ —Ä–∞–∑–±–∏–≤–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ —Ç–µ–º—ã –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Å–µ—Å—Å–∏–∏.",
        progress_title: "–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å",
        progress_desc: "–°–ª–µ–¥–∏—Ç–µ –∑–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è–º–∏ —Å –ø–æ–º–æ—â—å—é –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –æ—Å—Ç–∞–≤–∞–π—Ç–µ—Å—å –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ.",
        community_title: "–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ —Å–æ–æ–±—â–µ—Å—Ç–≤—É",
        community_desc: "–û–±—â–∞–π—Ç–µ—Å—å —Å —É—á–µ–Ω–∏–∫–∞–º–∏ –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É, –æ–±–º–µ–Ω–∏–≤–∞–π—Ç–µ—Å—å —Å–æ–≤–µ—Ç–∞–º–∏, —Ä–µ—Å—É—Ä—Å–∞–º–∏ –∏ –º–æ—Ç–∏–≤–∞—Ü–∏–µ–π."
      }
    };

    const body = document.getElementById('body');
    const languageSelect = document.getElementById('language-select');
    const logo = document.getElementById('logo');

    const savedTheme = localStorage.getItem('theme') || 'dark';
    const savedLang = localStorage.getItem('language') || 'en';

    function setTheme(theme) {
      if (theme === 'dark') {
        body.classList.add('dark');
        logo.src = 'rasmlar/darkrise.png';
      } else {
        body.classList.remove('dark');
        logo.src = 'rasmlar/lightrise.png';
      }
      localStorage.setItem('theme', theme);
    }

    function setLanguage(lang) {
      document.querySelectorAll('[data-key]').forEach(el => {
        const key = el.getAttribute('data-key');
        if (translations[lang][key]) el.innerHTML = translations[lang][key];
      });
      languageSelect.value = lang;
      localStorage.setItem('language', lang);
    }

    languageSelect.addEventListener('change', (e) => setLanguage(e.target.value));

    setTheme(savedTheme);
    setLanguage(savedLang);
    document.getElementById('yearSpan').textContent = new Date().getFullYear();
  </script>

  <!-- ‚úÖ PANEL API CONNECT (Go to Dashboard) -->
  <script>
    // üîß BACKEND manzilingni shu yerga yoz:
    // local django: http://127.0.0.1:8000/api
    // production: https://your-domain.uz/api
    const API_BASE = "http://127.0.0.1:8000/api";

    document.addEventListener('DOMContentLoaded', () => {
      const btn = document.getElementById('goDashboardBtn');
      if (!btn) return;

      btn.addEventListener('click', async () => {
        const access = localStorage.getItem('access');

        // token bo‚Äòlmasa -> login.html
        if (!access) {
          window.location.href = "login.html";
          return;
        }

        try {
          // NOTE: redirectlarni qo‚Äòlda ushlaymiz
          const res = await fetch(`${API_BASE}/auth/panel/`, {
            method: "GET",
            headers: {
              "Authorization": `Bearer ${access}`
            },
            redirect: "manual"
          });

          // Agar backend 302/301 qaytarsa: Location header bo‚Äòladi
          if (res.status === 301 || res.status === 302 || res.status === 303 || res.status === 307 || res.status === 308) {
            const loc = res.headers.get("Location");

            // Backend qayerga redirect qilsa ‚Äî shuni ochamiz
            if (loc) {
              // agar absolute url bo‚Äòlsa ham, relative bo‚Äòlsa ham ishlaydi:
              window.location.href = loc;
              return;
            }
          }

          // 200 bo‚Äòlsa: demak ruxsat bor, dashboardga o‚Äòtkazamiz
          if (res.ok) {
            window.location.href = "dashboard.html";
            return;
          }

          // 401/403 bo‚Äòlsa -> login
          if (res.status === 401 || res.status === 403) {
            window.location.href = "login.html";
            return;
          }

          // boshqa xatolar
          alert(`Panel error: status ${res.status}`);
        } catch (err) {
          console.error(err);
          alert("Network error: backendga ulana olmadim");
        }
      });
    });
  </script>

  <!-- MODIFIED: hide Admin nav link unless frontend admin session exists -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      try {
        const adminLink = document.getElementById('adminLink');
        if (!adminLink) return;
        function updateAdminVisibility() {
          adminLink.style.display = (localStorage.getItem('admin_session') === '1') ? '' : 'none';
        }
        updateAdminVisibility();
        window.addEventListener('storage', function(e) {
          if (e.key === 'admin_session') updateAdminVisibility();
        });
      } catch (err) {
        console.warn('adminLink visibility script error', err);
      }
    });
  </script>

</body>
</html>
